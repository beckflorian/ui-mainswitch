(function(){"use strict";try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode(".ui-mainswitch-wrapper[data-v-cf50ed30]{padding:0;margin:0}.ui-mainswitch-class[data-v-cf50ed30]{color:green;font-weight:700}h1[data-v-cf50ed30]{margin-bottom:10px}h2[data-v-cf50ed30]{margin-top:1.5rem;margin-bottom:.75rem}h3[data-v-cf50ed30]{margin-top:1rem}p[data-v-cf50ed30]{margin-bottom:5px}ul li[data-v-cf50ed30]{list-style-type:circle;list-style-position:inside;margin-left:15px}pre[data-v-cf50ed30]{padding:12px;margin:12px;background-color:#eee}code[data-v-cf50ed30]{font-size:.825rem;color:#ae0000}")),document.head.appendChild(e)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}})();
(function(r,t){typeof exports=="object"&&typeof module<"u"?t(exports,require("vue"),require("vuex")):typeof define=="function"&&define.amd?define(["exports","vue","vuex"],t):(r=typeof globalThis<"u"?globalThis:r||self,t(r["ui-mainswitch"]={},r.Vue,r.vuex))})(this,function(r,t,w){"use strict";function x(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var _=V,C=/\s/,y=/(_|-|\.|:)/,S=/([a-z][A-Z]|[A-Z][a-z])/;function V(e){return C.test(e)?e.toLowerCase():y.test(e)?(g(e)||e).toLowerCase():S.test(e)?k(e).toLowerCase():e.toLowerCase()}var N=/[\W_]+(.|$)/g;function g(e){return e.replace(N,function(o,s){return s?" "+s:""})}var b=/(.)([A-Z]+)/g;function k(e){return e.replace(b,function(o,s,n){return s+" "+n.toLowerCase().split("").join(" ")})}var T=_,E=I;function I(e){return T(e).replace(/[a-z]/i,function(o){return o.toUpperCase()}).trim()}var M=function(e){return String(e).replace(/([.*+?=^!:${}()|[\]\/\\])/g,"\\$1")},j=["a","an","and","as","at","but","by","en","for","from","how","if","in","neither","nor","of","on","only","onto","out","or","per","so","than","that","the","to","until","up","upon","v","v.","versus","vs","vs.","via","when","with","without","yet"],D=E,$=M,O=j,z=A,L=O.map($),U=new RegExp("[^^]\\b("+L.join("|")+")\\b","ig"),R=/:\s*(\w)/g;function A(e){return D(e).replace(/(^|\s)(\w)/g,function(o,s,n){return s+n.toUpperCase()}).replace(U,function(o){return o.toLowerCase()}).replace(R,function(o){return o.toUpperCase()})}const W=x(z),B=(e,o)=>{const s=e.__vccOpts||e;for(const[n,i]of o)s[n]=i;return s},H={name:"UIMainswitch",inject:["$socket"],props:{id:{type:String,required:!0},props:{type:Object,default:()=>({})},state:{type:Object,default:()=>({enabled:!1,visible:!1})}},setup(e){console.info("UIMainswitch setup with:",e),console.debug("Vue function loaded correctly",t.markRaw)},data(){return{input:{title:"some text here will base turned into title case."},vuetifyStyles:[{label:"Responsive Displays",url:"https://vuetifyjs.com/en/styles/display/#display"},{label:"Flex",url:"https://vuetifyjs.com/en/styles/flex/"},{label:"Spacing",url:"https://vuetifyjs.com/en/styles/spacing/#how-it-works"},{label:"Text & Typography",url:"https://vuetifyjs.com/en/styles/text-and-typography/#typography"}],tickIntervals:[{secs:4,text:'4"'},{secs:7,text:'7"'},{secs:10,text:'10"'},{secs:15,text:'15"'},{secs:20,text:'20"'},{secs:30,text:'30"'},{secs:40,text:'40"'},{secs:50,text:'50"'},{secs:60,text:"1'"},{secs:120,text:"2'"},{secs:240,text:"4'"},{secs:420,text:"7'"},{secs:600,text:"10'"},{secs:900,text:"15'"},{secs:1200,text:"20'"},{secs:1800,text:"30'"},{secs:2400,text:"40'"},{secs:3e3,text:"50'"},{secs:3600,text:"60'"},{secs:5400,text:"90'"},{secs:7200,text:"2h"},{secs:14400,text:"4h"},{secs:21600,text:"6h"},{secs:28800,text:"8h"},{secs:43200,text:"12h"},{secs:64800,text:"18h"},{secs:86400,text:"24h"},{secs:172800,text:"48h"}],actionColors:{on:"green",off:"red",ud:"grey"},statusColors:{on:"yellow-darken-2",off:"light-blue-accent-3",ud:"grey"},colorScheme:{on:"green",off:"red",auto:"blue",man:"black",bg:"grey-lighten-4",bga:"grey-lighten-2",autoOn:"yellow-darken-2",autoOff:"light-blue-accent-3"},mainSwitchStates:["on","off","auto","man"],autoColor:"grey",status:{mainSwitch:0,interval:14,feedback:"ud",auto:"ud"},mainSwitchColors:["red","green","blue","grey"]}},computed:{titleCase(){return W(this.input.title)},showInterval(){return this.tickIntervals[this.status.interval].text},readOnlySlider(){return this.status.mainSwitch==3},feedbackColor(){return this.actionColors[this.status.feedback]},autoColor(){return this.statusColors[this.status.auto]},showCountdown(){return this.status.timerSec>=0},secondsToTime(){return`${String(Math.floor(this.status.timerSec/3600)).padStart(2,"0")}:${String(Math.floor(this.status.timerSec%3600/60)).padStart(2,"0")}:${String(this.status.timerSec%60).padStart(2,"0")}`},mainSwitchColor(){return this.mainSwitchColors[this.status.mainSwitch]},mainSwitchColor0(){return this.status.mainSwitch==0?"white":"red"},mainSwitchColor1(){return this.status.mainSwitch==1?"white":"green"},mainSwitchColor2(){return this.status.mainSwitch==2?"white":"blue"},...w.mapState("data",["messages"])},mounted(){this.$socket.on("widget-load:"+this.id,e=>{this.$store.commit("data/bind",{widgetId:this.id,msg:e})}),this.$socket.on("msg-input:"+this.id,e=>{this.$store.commit("data/bind",{widgetId:this.id,msg:e})}),this.$socket.on("mainswitchOut:"+this.id,e=>{console.log(e.payload),e.payload?this.mainLabelColor=this.colorScheme.on:this.mainLabelColor=this.colorScheme.off}),this.$socket.on("feedback:"+this.id,e=>{this.feedbackColor=this.colorScheme[e.payload],console.log(e.payload)}),this.$socket.on("auto:"+this.id,e=>{this.autoColor=this.colorScheme[e.payload],console.log(e.payload)}),this.$socket.on("upMainswitch:"+this.id,e=>{this.mainswitch=e.payload,console.log("upMainswitch: "+e.payload)}),this.$socket.on("upTimer:"+this.id,e=>{this.timerSek=e.payload,console.log("upTimer: "+e.payload)}),this.$socket.on("updateStatus:"+this.id,e=>{this.status=e.payload,console.log("updateStatus: "+e.payload)}),this.$socket.emit("widget-load",this.id),this.$socket.emit("update-status",this.id)},unmounted(){var e,o,s,n,i,a,c;(e=this.$socket)==null||e.off("widget-load:"+this.id),(o=this.$socket)==null||o.off("msg-input:"+this.id),(s=this.$socket)==null||s.off("mainswitchOut:"+this.id),(n=this.$socket)==null||n.off("feedback:"+this.id),(i=this.$socket)==null||i.off("auto:"+this.id),(a=this.$socket)==null||a.off("upMainswitch:"+this.id),(c=this.$socket)==null||c.off("upTimer:"+this.id)},methods:{send(e){this.$socket.emit("widget-action",this.id,e)},alert(e){alert(e)},tester(){alert(this.mainswitch)},updateMainswitch(){console.info("downMainswitch: "+this.status.mainSwitch),this.$socket.emit("downMainswitch",this.id,{payload:this.status.mainSwitch})},updateInterval(){console.info("downInterval: "+{payload:this.status.intervall,secs:this.tickIntervals[this.status.interval].secs}),this.$socket.emit("downInterval",this.id,{payload:this.status.interval,secs:this.tickIntervals[this.status.interval].secs})},test(){console.info("custom event handler:"),this.$socket.emit("my-custom-event",this.id,{payload:"Custom Event"})}}},l=e=>(t.pushScopeId("data-v-cf50ed30"),e=e(),t.popScopeId(),e),q={className:"ui-mainswitch-wrapper"},Z=l(()=>t.createElementVNode("pre",null,`<v-btn @click="alert('Hello World')">Alert "Hello World"</v-btn>`,-1)),F=l(()=>t.createElementVNode("h3",null,[t.createElementVNode("code",null,"this.props")],-1)),P=l(()=>t.createElementVNode("p",null,[t.createTextVNode("The "),t.createElementVNode("code",null,"props"),t.createTextVNode(" object contains the properties defined in the widget's configuration in Node-RED.")],-1)),v=l(()=>t.createElementVNode("h3",null,[t.createElementVNode("code",null,"this.status")],-1)),G=l(()=>t.createElementVNode("p",null,[t.createTextVNode("The "),t.createElementVNode("code",null,"status"),t.createTextVNode(" object contains the properties defined in the widget's configuration in Node-RED.")],-1)),J=l(()=>t.createElementVNode("h3",null,[t.createElementVNode("code",null,"this.state")],-1)),K=l(()=>t.createElementVNode("p",null,[t.createTextVNode(" The "),t.createElementVNode("code",null,"state"),t.createTextVNode(" object contains the current visibility & behavioural state of the widget, including whether it is enabled and visible. This is not yet fully functionality in Dashboard 2.0, but will be expanded in future. ")],-1));function Q(e,o,s,n,i,a){const c=t.resolveComponent("v-chip"),h=t.resolveComponent("v-col"),u=t.resolveComponent("v-spacer"),f=t.resolveComponent("v-row"),Y=t.resolveComponent("v-expansion-panel-title"),m=t.resolveComponent("v-icon"),p=t.resolveComponent("v-btn"),tt=t.resolveComponent("v-btn-toggle"),et=t.resolveComponent("v-slider"),ot=t.resolveComponent("v-expansion-panel-text"),st=t.resolveComponent("v-expansion-panel"),at=t.resolveComponent("v-expansion-panels");return t.openBlock(),t.createElementBlock("div",q,[t.createVNode(at,null,{default:t.withCtx(()=>[t.createVNode(st,null,{default:t.withCtx(()=>[t.createVNode(Y,{class:"pa-2"},{default:t.withCtx(()=>[t.createVNode(f,{"no-gutters":""},{default:t.withCtx(()=>[t.createVNode(h,{cols:"auto"},{default:t.withCtx(()=>[t.createVNode(c,{class:"ma-1 rounded",color:a.feedbackColor,"prepend-icon":"mdi-hydro-power",density:"compact",size:"default",variant:"flat"},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(s.props.switchLabel),1)]),_:1},8,["color"])]),_:1}),a.showCountdown?(t.openBlock(),t.createBlock(h,{key:0,cols:"auto"},{default:t.withCtx(()=>[t.createVNode(c,{class:"ma-3",color:"black",density:"compact",variant:"flat",size:"small"},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(a.secondsToTime)+" bis "+t.toDisplayString(i.status.switchToText),1)]),_:1})]),_:1})):t.createCommentVNode("",!0),t.createVNode(u),t.createVNode(h,{cols:"auto"},{default:t.withCtx(()=>[t.createVNode(c,{class:"ma-1 rounded",color:a.autoColor,"prepend-icon":"mdi-import",density:"compact",variant:"flat",size:"default"},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(s.props.autoLabel),1)]),_:1},8,["color"])]),_:1})]),_:1})]),_:1}),t.createVNode(ot,null,{default:t.withCtx(()=>[t.createVNode(f,null,{default:t.withCtx(()=>[t.createVNode(h,{cols:"auto"},{default:t.withCtx(()=>[t.createVNode(tt,{modelValue:i.status.mainSwitch,"onUpdate:modelValue":[o[0]||(o[0]=d=>i.status.mainSwitch=d),o[1]||(o[1]=d=>a.updateMainswitch())],class:"pa-1",mandatory:"",variant:"flat",divided:"",rounded:"l",size:"small"},{default:t.withCtx(()=>[t.createVNode(p,{color:"red"},{default:t.withCtx(()=>[t.createVNode(m,{color:a.mainSwitchColor0},{default:t.withCtx(()=>[t.createTextVNode("mdi-fan-off")]),_:1},8,["color"])]),_:1}),t.createVNode(p,{color:"green"},{default:t.withCtx(()=>[t.createVNode(m,{color:a.mainSwitchColor1},{default:t.withCtx(()=>[t.createTextVNode("mdi-fan")]),_:1},8,["color"])]),_:1}),t.createVNode(p,{color:"blue"},{default:t.withCtx(()=>[t.createVNode(m,{color:a.mainSwitchColor2},{default:t.withCtx(()=>[t.createTextVNode("mdi-fan-auto")]),_:1},8,["color"])]),_:1}),t.createVNode(p,{color:"black"},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(a.showInterval),1)]),_:1})]),_:1},8,["modelValue"])]),_:1}),t.createVNode(u),t.createVNode(h,null,{default:t.withCtx(()=>[t.createVNode(et,{max:"27","show-ticks":"",step:"1","tick-size":"1",modelValue:i.status.interval,"onUpdate:modelValue":[o[2]||(o[2]=d=>i.status.interval=d),o[3]||(o[3]=d=>a.updateInterval())],"prepend-icon":"mdi-clock-time-four","min-width":"20em","max-width":"40em",density:"compact","thumb-size":"10",readonly:a.readOnlySlider,class:"pa-2",size:"small"},null,8,["modelValue","readonly"]),t.createTextVNode(t.toDisplayString(e.timerSek),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t.createTextVNode(" "+t.toDisplayString(a.mainSwitchColor0)+" "+t.toDisplayString(a.mainSwitchColor)+" ",1),Z,t.createVNode(p,{onClick:o[4]||(o[4]=d=>a.alert("Hello World"))},{default:t.withCtx(()=>[t.createTextVNode('Alert "Hello World"')]),_:1}),F,P,t.createElementVNode("pre",null,t.toDisplayString(s.props),1),v,G,t.createElementVNode("pre",null,t.toDisplayString(i.status),1),J,K,t.createElementVNode("pre",null,t.toDisplayString(s.state),1)])}const X=B(H,[["render",Q],["__scopeId","data-v-cf50ed30"]]);r.UIMainswitch=X,Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})});
