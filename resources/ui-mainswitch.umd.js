(function(){"use strict";try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode(".ui-mainswitch-wrapper[data-v-0bb0010e]{padding:0;margin:0}.ui-mainswitch-class[data-v-0bb0010e]{color:green;font-weight:700}h1[data-v-0bb0010e]{margin-bottom:10px}h2[data-v-0bb0010e]{margin-top:1.5rem;margin-bottom:.75rem}h3[data-v-0bb0010e]{margin-top:1rem}p[data-v-0bb0010e]{margin-bottom:5px}ul li[data-v-0bb0010e]{list-style-type:circle;list-style-position:inside;margin-left:15px}pre[data-v-0bb0010e]{padding:12px;margin:12px;background-color:#eee}code[data-v-0bb0010e]{font-size:.825rem;color:#ae0000}.v-expansion-panel-text[data-v-0bb0010e]{background-color:#f0f0f0}")),document.head.appendChild(e)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}})();
(function(r,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue"),require("vuex")):typeof define=="function"&&define.amd?define(["exports","vue","vuex"],e):(r=typeof globalThis<"u"?globalThis:r||self,e(r["ui-mainswitch"]={},r.Vue,r.vuex))})(this,function(r,e,u){"use strict";const N=(t,i)=>{const d=t.__vccOpts||t;for(const[x,a]of i)d[x]=a;return d},y={name:"UIMainswitch",inject:["$socket"],props:{id:{type:String,required:!0},props:{type:Object,default:()=>({})},state:{type:Object,default:()=>({enabled:!1,visible:!1})}},setup(t){console.info("UIMainswitch setup with:",t),console.debug("Vue function loaded correctly",e.markRaw)},data(){return{vuetifyStyles:[{label:"Responsive Displays",url:"https://vuetifyjs.com/en/styles/display/#display"},{label:"Flex",url:"https://vuetifyjs.com/en/styles/flex/"},{label:"Spacing",url:"https://vuetifyjs.com/en/styles/spacing/#how-it-works"},{label:"Text & Typography",url:"https://vuetifyjs.com/en/styles/text-and-typography/#typography"}],startTimeErrorMessage:"",durationErrorMessage:"",dialog:!1,dialogDelete:!1,events:[],editedIndex:-1,editedItem:{startTime:"",duration:"",active:!0,day:[!0,!0,!0,!0,!0,!0,!0]},defaultItem:{startTime:"",duration:"",active:!0,day:[!0,!0,!0,!0,!0,!0,!0]},condition:{mainSwitch:0,interval:14,events:[],feedback:null,auto:null}}},computed:{tableHeaders(){const t=[{title:this.props.language.start,value:"startTime",key:"startTime"},{title:this.props.language.duration,value:"duration"}];return this.props.language.dayOrder.forEach(i=>{t.push({title:this.props.language.dayLabels[i],value:"day."+i})}),t.push({title:this.props.language.activeLabel,value:"active"},{title:this.props.language.actions,value:"actions",sortable:!1}),t},maxInterval(){return this.props.tickInterval.length-1},formTitle(){return this.editedIndex===-1?this.props.language.newEvent:this.props.language.editEvent},showInterval(){return this.props.tickInterval[this.condition.interval].text},readOnlySlider(){return this.condition.mainSwitch==3},mainSwitchColor_2(){return this.props.colors.mainSwitchAuto[this.condition.mainSwitch==2][this.condition.auto]},showCountdown(){return this.condition.countdownSec>=0},...u.mapState("data",["messages"])},watch:{dialog(t){t||this.close()},dialogDelete(t){t||this.closeDelete()}},mounted(){this.$socket.on("widget-load:"+this.id,t=>{this.$store.commit("data/bind",{widgetId:this.id,msg:t})}),this.$socket.on("updateCondition:"+this.id,t=>{this.condition=t.payload}),this.$socket.emit("widget-load",this.id),this.$socket.emit("update-condition"+this.condition.nodeId,this.id)},unmounted(){var t,i;(t=this.$socket)==null||t.off("widget-load:"+this.id),(i=this.$socket)==null||i.off("updateCondition:"+this.id)},methods:{send(t){this.$socket.emit("widget-action",this.id,t)},mainSwitchColor(t){return this.props.colors.mainSwitch[t]},mainSwitchColorX(t){return this.condition.mainSwitch==t?this.props.colors.mainSwitch[4]:this.props.colors.mainSwitch[t]},elevated(t){return t==this.condition.lastSetter},secondsToTime(t){let i=0;return this.condition[t]>0&&(i=this.condition[t]),`${String(Math.floor(i/3600)).padStart(2,"0")}:${String(Math.floor(i%3600/60)).padStart(2,"0")}:${String(i%60).padStart(2,"0")}`},colorPicker(t){return t in this.condition?this.props.colors[t][this.condition[t]]:this.props.colors[t]},updateMainswitch(){console.info("downMainswitch: payload: "+this.condition.mainSwitch),this.$socket.emit("downMainswitch"+this.condition.nodeId,this.id,{payload:this.condition.mainSwitch})},updateInterval(){console.info("downInterval: "+{payload:this.condition.intervall,secs:this.props.tickInterval[this.condition.interval].secs}),this.$socket.emit("downInterval"+this.condition.nodeId,this.id,{payload:this.condition.interval,secs:this.props.tickInterval[this.condition.interval].secs})},updateEvents(){console.info("downEvents: "+this.condition.events),this.$socket.emit("downEvents"+this.condition.nodeId,this.id,{payload:this.condition.events})},editItem(t){this.editedIndex=this.condition.events.indexOf(t),this.editedItem=Object.assign({},t),this.dialog=!0},deleteItem(t){this.editedIndex=this.condition.events.indexOf(t),this.editedItem=Object.assign({},t),this.dialogDelete=!0},deleteItemConfirm(){this.condition.events.splice(this.editedIndex,1),this.updateEvents(),this.closeDelete()},close(){this.dialog=!1,this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},closeDelete(){this.dialogDelete=!1,this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},save(){this.editedItem.startTime?this.editedItem.duration?(this.startTimeErrorMessage="",this.durationErrorMessage="",this.editedIndex>-1?Object.assign(this.condition.events[this.editedIndex],this.editedItem):this.condition.events.push(this.editedItem),this.updateEvents(),this.close()):(this.durationErrorMessage="Sie müssen eine Zeit eingeben.",this.startTimeErrorMessage=""):(this.startTimeErrorMessage="Sie müssen eine Zeit eingeben.",this.durationErrorMessage="")}}},k={className:"ui-mainswitch-wrapper"},b={class:"text-h5"};function I(t,i,d,x,a,o){const h=e.resolveComponent("v-chip"),s=e.resolveComponent("v-col"),c=e.resolveComponent("v-spacer"),_=e.resolveComponent("v-row"),T=e.resolveComponent("v-expansion-panel-title"),m=e.resolveComponent("v-icon"),l=e.resolveComponent("v-btn"),D=e.resolveComponent("v-btn-toggle"),E=e.resolveComponent("v-slider"),M=e.resolveComponent("v-toolbar-title"),j=e.resolveComponent("v-divider"),f=e.resolveComponent("v-card-title"),g=e.resolveComponent("v-text-field"),O=e.resolveComponent("v-switch"),U=e.resolveComponent("v-checkbox"),P=e.resolveComponent("v-container"),z=e.resolveComponent("v-card-text"),w=e.resolveComponent("v-card-actions"),V=e.resolveComponent("v-card"),C=e.resolveComponent("v-dialog"),B=e.resolveComponent("v-toolbar"),L=e.resolveComponent("v-checkbox-btn"),q=e.resolveComponent("v-data-table"),A=e.resolveComponent("v-expansion-panel-text"),R=e.resolveComponent("v-expansion-panel"),X=e.resolveComponent("v-expansion-panels");return e.openBlock(),e.createElementBlock("div",k,[e.createVNode(X,null,{default:e.withCtx(()=>[e.createVNode(R,null,{default:e.withCtx(()=>[e.createVNode(T,{class:"pa-2",color:o.colorPicker("expansionPanelTitle")},{default:e.withCtx(()=>[e.createVNode(_,{"no-gutters":"",align:"center"},{default:e.withCtx(()=>[e.createVNode(s,{cols:"auto",justify:"start"},{default:e.withCtx(()=>[e.createVNode(h,{class:"ma-1 rounded",color:o.colorPicker("feedback"),"prepend-icon":d.props.feedbackIcon,density:"compact",elevation:"2",size:"large",variant:"flat"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(d.props.switchLabel),1)]),_:1},8,["color","prepend-icon"])]),_:1}),o.showCountdown?(e.openBlock(),e.createBlock(s,{key:0,cols:"auto",justify:"start"},{default:e.withCtx(()=>[e.createVNode(h,{class:"ma-1 rounded",color:o.colorPicker("countdown"),density:"compact",variant:"flat",elevation:"2",size:"default","prepend-icon":"mdi-timer-sand"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(o.secondsToTime("countdownSec"))+" "+e.toDisplayString(this.props.language.until)+" "+e.toDisplayString(a.condition.switchToText),1)]),_:1},8,["color"])]),_:1})):e.createCommentVNode("",!0),e.createVNode(c),e.createVNode(s,{cols:"auto",justify:"end"},{default:e.withCtx(()=>[d.props.topicAuto?(e.openBlock(),e.createBlock(h,{key:0,class:"ma-1 rounded",color:o.colorPicker("autoIn"),"prepend-icon":"mdi-import",density:"compact",elevation:o.elevated("autoIn")?7:2,variant:"flat",size:"default"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(d.props.autoLabel),1)]),_:1},8,["color","elevation"])):e.createCommentVNode("",!0),a.condition.timerRunning?(e.openBlock(),e.createBlock(h,{key:1,class:"ma-1 rounded",color:o.colorPicker("timerIn"),"prepend-icon":"mdi-timer-outline",density:"compact",elevation:o.elevated("timer")?7:2,variant:"elevated",size:"default"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(o.secondsToTime("timerNextEventSec")),1)]),_:1},8,["color","elevation"])):e.createCommentVNode("",!0)]),_:1})]),_:1})]),_:1},8,["color"]),e.createVNode(A,null,{default:e.withCtx(()=>[e.createVNode(_,{align:"center"},{default:e.withCtx(()=>[e.createVNode(s,{cols:"auto"},{default:e.withCtx(()=>[e.createVNode(D,{modelValue:a.condition.mainSwitch,"onUpdate:modelValue":[i[0]||(i[0]=n=>a.condition.mainSwitch=n),i[1]||(i[1]=n=>o.updateMainswitch())],class:"",mandatory:"",variant:"flat",divided:"",rounded:"l",size:"small"},{default:e.withCtx(()=>[e.createVNode(l,{color:o.mainSwitchColor(0)},{default:e.withCtx(()=>[e.createVNode(m,{color:o.mainSwitchColorX(0)},{default:e.withCtx(()=>[e.createTextVNode("mdi-fan-off")]),_:1},8,["color"])]),_:1},8,["color"]),e.createVNode(l,{color:o.mainSwitchColor(1)},{default:e.withCtx(()=>[e.createVNode(m,{color:o.mainSwitchColorX(1)},{default:e.withCtx(()=>[e.createTextVNode("mdi-fan")]),_:1},8,["color"])]),_:1},8,["color"]),e.createVNode(l,{color:o.mainSwitchColor(2)},{default:e.withCtx(()=>[e.createVNode(m,{color:o.mainSwitchColor_2},{default:e.withCtx(()=>[e.createTextVNode("mdi-fan-auto")]),_:1},8,["color"])]),_:1},8,["color"]),e.createVNode(l,{color:o.mainSwitchColor(3)},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(o.showInterval),1)]),_:1},8,["color"])]),_:1},8,["modelValue"])]),_:1}),e.createVNode(c),e.createVNode(s,null,{default:e.withCtx(()=>[e.createVNode(E,{max:o.maxInterval,"show-ticks":"",step:"1","tick-size":"1",modelValue:a.condition.interval,"onUpdate:modelValue":[i[2]||(i[2]=n=>a.condition.interval=n),i[3]||(i[3]=n=>o.updateInterval())],"prepend-icon":"mdi-timer-sand","min-width":"20em","max-width":"40em",density:"compact","thumb-size":"10",readonly:o.readOnlySlider,color:o.colorPicker("slider"),size:"small","hide-details":""},null,8,["max","modelValue","readonly","color"]),e.createTextVNode(e.toDisplayString(t.timerSek),1)]),_:1})]),_:1}),e.createVNode(_,null,{default:e.withCtx(()=>[e.createVNode(q,{headers:o.tableHeaders,items:a.condition.events,"sort-by":[{key:"startTime",order:"asc"}],density:"compact","hide-default-footer":!0,md:"4"},e.createSlots({top:e.withCtx(()=>[e.createVNode(B,{elevated:"",density:"compact",color:o.colorPicker("eventToolbar")},{default:e.withCtx(()=>[e.createVNode(M,null,{default:e.withCtx(()=>[e.createVNode(m,{size:"x-small"},{default:e.withCtx(()=>[e.createTextVNode("mdi-timer-outline")]),_:1}),e.createTextVNode(" "+e.toDisplayString(this.props.language.events),1)]),_:1}),e.createVNode(j,{class:"mx-4",inset:"",vertical:""}),e.createVNode(c),e.createVNode(C,{"max-width":"500px",modelValue:a.dialog,"onUpdate:modelValue":i[7]||(i[7]=n=>a.dialog=n)},{activator:e.withCtx(({props:n})=>[e.createVNode(l,e.mergeProps({class:"mb-2",color:o.colorPicker("plus")},n,{icon:"mdi-plus"}),null,16,["color"])]),default:e.withCtx(()=>[e.createVNode(V,{variant:"flat"},{default:e.withCtx(()=>[e.createVNode(f,null,{default:e.withCtx(()=>[e.createElementVNode("span",b,e.toDisplayString(o.formTitle),1)]),_:1}),e.createVNode(z,null,{default:e.withCtx(()=>[e.createVNode(P,null,{default:e.withCtx(()=>[e.createVNode(_,null,{default:e.withCtx(()=>[e.createVNode(s,{cols:"4",ma:"2",pa:"2",sm:"6"},{default:e.withCtx(()=>[e.createVNode(g,{type:"time",label:this.props.language.start,modelValue:a.editedItem.startTime,"onUpdate:modelValue":i[4]||(i[4]=n=>a.editedItem.startTime=n),messages:a.startTimeErrorMessage},null,8,["label","modelValue","messages"])]),_:1}),e.createVNode(s,{cols:"2",ma:"2",pa:"2",sm:"6"},{default:e.withCtx(()=>[e.createVNode(g,{type:"time",label:this.props.language.duration,modelValue:a.editedItem.duration,"onUpdate:modelValue":i[5]||(i[5]=n=>a.editedItem.duration=n),messages:a.durationErrorMessage},null,8,["label","modelValue","messages"])]),_:1}),e.createVNode(s,{cols:"2",md:"4",sm:"6"},{default:e.withCtx(()=>[e.createVNode(O,{label:this.props.language.activeLabel,color:"green",modelValue:a.editedItem.active,"onUpdate:modelValue":i[6]||(i[6]=n=>a.editedItem.active=n)},null,8,["label","modelValue"])]),_:1})]),_:1}),e.createVNode(_,null,{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(this.props.language.dayOrder,n=>(e.openBlock(),e.createBlock(U,{modelValue:a.editedItem.day[n],"onUpdate:modelValue":p=>a.editedItem.day[n]=p,label:this.props.language.dayLabels[n],"hide-details":""},null,8,["modelValue","onUpdate:modelValue","label"]))),256))]),_:1})]),_:1})]),_:1}),e.createVNode(w,null,{default:e.withCtx(()=>[e.createVNode(c),e.createVNode(l,{color:"blue-darken-1",variant:"text",onClick:o.close},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(this.props.language.cancel),1)]),_:1},8,["onClick"]),e.createVNode(l,{color:"blue-darken-1",variant:"text",onClick:o.save},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(this.props.language.ok),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e.createVNode(C,{"max-width":"500px",modelValue:a.dialogDelete,"onUpdate:modelValue":i[8]||(i[8]=n=>a.dialogDelete=n)},{default:e.withCtx(()=>[e.createVNode(V,null,{default:e.withCtx(()=>[e.createVNode(f,{class:"text-h5"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(this.props.language.deleteConfirm),1)]),_:1}),e.createVNode(w,null,{default:e.withCtx(()=>[e.createVNode(c),e.createVNode(l,{color:"blue-darken-1",variant:"text",onClick:o.closeDelete},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(this.props.language.cancel),1)]),_:1},8,["onClick"]),e.createVNode(l,{color:"blue-darken-1",onClick:o.deleteItemConfirm,variant:"text"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(this.props.language.ok),1)]),_:1},8,["onClick"]),e.createVNode(c)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["color"])]),"item.active":e.withCtx(({item:n})=>[e.createVNode(h,{color:n.active?o.colorPicker("activeActive"):o.colorPicker("activeInactive"),text:n.active?this.props.language.active:this.props.language.inactive,class:"text-uppercase",size:"small",label:""},null,8,["color","text"])]),"item.actions":e.withCtx(({item:n})=>[e.createVNode(m,{class:"me-2",size:"small",onClick:p=>o.editItem(n)},{default:e.withCtx(()=>[e.createTextVNode(" mdi-pencil-outline ")]),_:2},1032,["onClick"]),e.createVNode(m,{size:"small",onClick:p=>o.deleteItem(n)},{default:e.withCtx(()=>[e.createTextVNode(" mdi-delete-outline ")]),_:2},1032,["onClick"])]),"no-data":e.withCtx(()=>[e.createTextVNode(e.toDisplayString(this.props.language.noData),1)]),_:2},[e.renderList(this.props.language.dayOrder,n=>({name:`item.day.${n}`,fn:e.withCtx(({item:p})=>[e.createVNode(L,{modelValue:p.day[n],"onUpdate:modelValue":F=>p.day[n]=F,density:"compact",readonly:""},null,8,["modelValue","onUpdate:modelValue"])])}))]),1032,["headers","items"])]),_:1})]),_:1})]),_:1})]),_:1})])}const S=N(y,[["render",I],["__scopeId","data-v-0bb0010e"]]);r.UIMainswitch=S,Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})});
