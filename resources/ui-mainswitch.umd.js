(function(){"use strict";try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode(".ui-mainswitch-wrapper[data-v-7688e34a]{padding:0;margin:0}.ui-mainswitch-class[data-v-7688e34a]{color:green;font-weight:700}h1[data-v-7688e34a]{margin-bottom:10px}h2[data-v-7688e34a]{margin-top:1.5rem;margin-bottom:.75rem}h3[data-v-7688e34a]{margin-top:1rem}p[data-v-7688e34a]{margin-bottom:5px}ul li[data-v-7688e34a]{list-style-type:circle;list-style-position:inside;margin-left:15px}pre[data-v-7688e34a]{padding:12px;margin:12px;background-color:#eee}code[data-v-7688e34a]{font-size:.825rem;color:#ae0000}")),document.head.appendChild(e)}}catch(a){console.error("vite-plugin-css-injected-by-js",a)}})();
(function(c,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue"),require("vuex")):typeof define=="function"&&define.amd?define(["exports","vue","vuex"],e):(c=typeof globalThis<"u"?globalThis:c||self,e(c["ui-mainswitch"]={},c.Vue,c.vuex))})(this,function(c,e,V){"use strict";function _(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var N=g,w=/\s/,x=/(_|-|\.|:)/,y=/([a-z][A-Z]|[A-Z][a-z])/;function g(t){return w.test(t)?t.toLowerCase():x.test(t)?(b(t)||t).toLowerCase():y.test(t)?S(t).toLowerCase():t.toLowerCase()}var C=/[\W_]+(.|$)/g;function b(t){return t.replace(C,function(o,s){return s?" "+s:""})}var E=/(.)([A-Z]+)/g;function S(t){return t.replace(E,function(o,s,r){return s+" "+r.toLowerCase().split("").join(" ")})}var k=N,T=D;function D(t){return k(t).replace(/[a-z]/i,function(o){return o.toUpperCase()}).trim()}var I=function(t){return String(t).replace(/([.*+?=^!:${}()|[\]\/\\])/g,"\\$1")},j=["a","an","and","as","at","but","by","en","for","from","how","if","in","neither","nor","of","on","only","onto","out","or","per","so","than","that","the","to","until","up","upon","v","v.","versus","vs","vs.","via","when","with","without","yet"],M=T,O=I,R=j,z=H,L=R.map(O),U=new RegExp("[^^]\\b("+L.join("|")+")\\b","ig"),W=/:\s*(\w)/g;function H(t){return M(t).replace(/(^|\s)(\w)/g,function(o,s,r){return s+r.toUpperCase()}).replace(U,function(o){return o.toLowerCase()}).replace(W,function(o){return o.toUpperCase()})}const $=_(z),A=(t,o)=>{const s=t.__vccOpts||t;for(const[r,a]of o)s[r]=a;return s},B={name:"UIMainswitch",inject:["$socket"],props:{id:{type:String,required:!0},props:{type:Object,default:()=>({})},state:{type:Object,default:()=>({enabled:!1,visible:!1})}},setup(t){console.info("UIMainswitch setup with:",t),console.debug("Vue function loaded correctly",e.markRaw)},data(){return{input:{title:"some text here will base turned into title case."},vuetifyStyles:[{label:"Responsive Displays",url:"https://vuetifyjs.com/en/styles/display/#display"},{label:"Flex",url:"https://vuetifyjs.com/en/styles/flex/"},{label:"Spacing",url:"https://vuetifyjs.com/en/styles/spacing/#how-it-works"},{label:"Text & Typography",url:"https://vuetifyjs.com/en/styles/text-and-typography/#typography"}],tickIntervals:[{secs:4,text:'4"'},{secs:7,text:'7"'},{secs:10,text:'10"'},{secs:15,text:'15"'},{secs:20,text:'20"'},{secs:30,text:'30"'},{secs:40,text:'40"'},{secs:50,text:'50"'},{secs:60,text:"1'"},{secs:120,text:"2'"},{secs:240,text:"4'"},{secs:420,text:"7'"},{secs:600,text:"10'"},{secs:900,text:"15'"},{secs:1200,text:"20'"},{secs:1800,text:"30'"},{secs:2400,text:"40'"},{secs:3e3,text:"50'"},{secs:3600,text:"60'"},{secs:5400,text:"90'"},{secs:7200,text:"2h"},{secs:14400,text:"4h"},{secs:21600,text:"6h"},{secs:28800,text:"8h"},{secs:43200,text:"12h"},{secs:64800,text:"18h"},{secs:86400,text:"24h"},{secs:172800,text:"48h"}],actionColors:{on:"green",off:"red",ud:"grey"},statusColors:{on:"yellow-darken-2",off:"light-blue-accent-3",ud:"grey"},colorScheme:{on:"green",off:"red",auto:"blue",man:"black",bg:"grey-lighten-4",bga:"grey-lighten-2",autoOn:"yellow-darken-2",autoOff:"light-blue-accent-3"},mainSwitchStates:["on","off","auto","man"],autoColor:"grey",status:{mainSwitch:0,interval:14,feedback:"ud",auto:"ud"}}},computed:{titleCase(){return $(this.input.title)},showInterval(){return this.tickIntervals[this.status.interval].text},readOnlySlider(){return this.status.mainSwitch==3},feedbackColor(){return this.actionColors[this.status.feedback]},autoColor(){return this.statusColors[this.status.auto]},...V.mapState("data",["messages"])},mounted(){this.$socket.on("widget-load:"+this.id,t=>{this.$store.commit("data/bind",{widgetId:this.id,msg:t})}),this.$socket.on("msg-input:"+this.id,t=>{this.$store.commit("data/bind",{widgetId:this.id,msg:t})}),this.$socket.on("mainswitchOut:"+this.id,t=>{console.log(t.payload),t.payload?this.mainLabelColor=this.colorScheme.on:this.mainLabelColor=this.colorScheme.off}),this.$socket.on("feedback:"+this.id,t=>{this.feedbackColor=this.colorScheme[t.payload],console.log(t.payload)}),this.$socket.on("auto:"+this.id,t=>{this.autoColor=this.colorScheme[t.payload],console.log(t.payload)}),this.$socket.on("upMainswitch:"+this.id,t=>{this.mainswitch=t.payload,console.log("upMainswitch: "+t.payload)}),this.$socket.on("upTimer:"+this.id,t=>{this.timerSek=t.payload,console.log("upTimer: "+t.payload)}),this.$socket.on("updateStatus:"+this.id,t=>{this.status=t.payload,console.log("updateStatus: "+t.payload)}),this.$socket.emit("widget-load",this.id),this.$socket.emit("update-status",this.id)},unmounted(){var t,o,s,r,a,i,h;(t=this.$socket)==null||t.off("widget-load:"+this.id),(o=this.$socket)==null||o.off("msg-input:"+this.id),(s=this.$socket)==null||s.off("mainswitchOut:"+this.id),(r=this.$socket)==null||r.off("feedback:"+this.id),(a=this.$socket)==null||a.off("auto:"+this.id),(i=this.$socket)==null||i.off("upMainswitch:"+this.id),(h=this.$socket)==null||h.off("upTimer:"+this.id)},methods:{send(t){this.$socket.emit("widget-action",this.id,t)},alert(t){alert(t)},tester(){alert(this.mainswitch)},updateMainswitch(){console.info("downMainswitch: "+this.status.mainSwitch),this.$socket.emit("downMainswitch",this.id,{payload:this.status.mainSwitch})},updateInterval(){console.info("downInterval: "+{payload:this.status.intervall,secs:this.tickIntervals[this.status.interval].secs}),this.$socket.emit("downInterval",this.id,{payload:this.status.interval,secs:this.tickIntervals[this.status.interval].secs})},test(){console.info("custom event handler:"),this.$socket.emit("my-custom-event",this.id,{payload:"Custom Event"})}}},n=t=>(e.pushScopeId("data-v-7688e34a"),t=t(),e.popScopeId(),t),q={className:"ui-mainswitch-wrapper"},P=n(()=>e.createElementVNode("h2",null,"Using Vuetify Components",-1)),F=n(()=>e.createElementVNode("p",null,[e.createElementVNode("a",{href:"https://vuetifyjs.com/en/components/all/#containment",target:"_blank"},"Vuetify"),e.createTextVNode(' is included by default, so we can include any of their components. Here we have a button that will open a "Hello World" alert: ')],-1)),Y=n(()=>e.createElementVNode("pre",null,`<v-btn @click="alert('Hello World')">Alert "Hello World"</v-btn>`,-1)),Z=n(()=>e.createElementVNode("h2",null,"Accessing Properties",-1)),J=n(()=>e.createElementVNode("p",null," Your Vue component will be rendered and passed a few built-in properties. ",-1)),X=n(()=>e.createElementVNode("h3",null,[e.createElementVNode("code",null,"this.id")],-1)),G=n(()=>e.createElementVNode("p",null,[e.createTextVNode("Each widget has a unique ID, which can be used when sending messages to Node-RED via "),e.createElementVNode("code",null,"this.$socket.emit()"),e.createTextVNode(".")],-1)),K=n(()=>e.createElementVNode("h3",null,[e.createElementVNode("code",null,"this.props")],-1)),Q=n(()=>e.createElementVNode("p",null,[e.createTextVNode("The "),e.createElementVNode("code",null,"props"),e.createTextVNode(" object contains the properties defined in the widget's configuration in Node-RED.")],-1)),v=n(()=>e.createElementVNode("h3",null,[e.createElementVNode("code",null,"this.status")],-1)),ee=n(()=>e.createElementVNode("p",null,[e.createTextVNode("The "),e.createElementVNode("code",null,"status"),e.createTextVNode(" object contains the properties defined in the widget's configuration in Node-RED.")],-1)),te=n(()=>e.createElementVNode("h3",null,[e.createElementVNode("code",null,"this.state")],-1)),oe=n(()=>e.createElementVNode("p",null,[e.createTextVNode(" The "),e.createElementVNode("code",null,"state"),e.createTextVNode(" object contains the current visibility & behavioural state of the widget, including whether it is enabled and visible. This is not yet fully functionality in Dashboard 2.0, but will be expanded in future. ")],-1)),ne=n(()=>e.createElementVNode("h2",null,"Communications with Node-RED",-1)),se=n(()=>e.createElementVNode("p",null,"Events are sent back and forth between Node-RED and Dashboard 2.0 with SocketIO",-1)),ae=n(()=>e.createElementVNode("h3",null,"Sending Node-RED Messages",-1)),le=n(()=>e.createElementVNode("p",null,"You can send and receive the built-in events, as well as defining your own:",-1)),ie=n(()=>e.createElementVNode("h3",null,"Sending Custom SocketIO Events",-1)),re=n(()=>e.createElementVNode("p",null,[e.createTextVNode(" You can also send custom events, which can be handled by a custom event handler in Node-RED. The Node-RED-side's handler should have "),e.createElementVNode("code",null,"(conn, id, msg)"),e.createTextVNode(" as the input variables. ")],-1)),ce=n(()=>e.createElementVNode("h2",null,"Data Retention & VueX Stores",-1)),de=n(()=>e.createElementVNode("p",null,"Dashboard 2.0 has a built-in VueX datastore. This can be used to store (and retrieve) the latest received messages.",-1)),he=n(()=>e.createElementVNode("p",null,"Note: the vuex store is cleared on refresh of a screen, at which point, data will be loaded from the Node-RED datastore, should it be present.",-1)),pe=n(()=>e.createElementVNode("p",null,"Send a message to this node in order to see the value here:",-1)),me=n(()=>e.createElementVNode("p",null,[e.createTextVNode("Note that it persists, even after refresh. This is because, in our "),e.createElementVNode("code",null,"onInput"),e.createTextVNode(" event handler in our "),e.createElementVNode("code",null,"ui-mainswitch.js"),e.createTextVNode(" file, we store the message in the Node-RED datastore.")],-1)),ue=n(()=>e.createElementVNode("h2",null,"Styling with Vuetify & CSS",-1)),fe=n(()=>e.createElementVNode("p",null,[e.createTextVNode(" We can define our own CSS within the widget's repository, and expose classes like "),e.createElementVNode("code",{class:"ui-mainswitch-class"},"ui-mainswitch-class")],-1)),Ve=["href"],_e=n(()=>e.createElementVNode("h2",null,"External Dependencies",-1)),Ne=n(()=>e.createElementVNode("p",null,[e.createTextVNode(" Any additional libraries you require can be installed as in any other package. When the "),e.createElementVNode("code",null,"npm run build"),e.createTextVNode(" command is run, Vite will package everything up into the single "),e.createElementVNode("code",null,".umd.js"),e.createTextVNode(" file. ")],-1)),we=n(()=>e.createElementVNode("p",null,[e.createTextVNode(" Here, we include the NPM package "),e.createElementVNode("code",null,"to-title-case"),e.createTextVNode(", and bind it's functionality to a VueJS Computed Variable, which automatically re-calculates. ")],-1));function xe(t,o,s,r,a,i){const h=e.resolveComponent("v-chip"),p=e.resolveComponent("v-col"),u=e.resolveComponent("v-spacer"),f=e.resolveComponent("v-row"),ge=e.resolveComponent("v-expansion-panel-title"),m=e.resolveComponent("v-icon"),d=e.resolveComponent("v-btn"),Ce=e.resolveComponent("v-btn-toggle"),be=e.resolveComponent("v-slider"),Ee=e.resolveComponent("v-expansion-panel-text"),Se=e.resolveComponent("v-expansion-panel"),ke=e.resolveComponent("v-expansion-panels"),Te=e.resolveComponent("v-text-field");return e.openBlock(),e.createElementBlock("div",q,[e.createVNode(ke,null,{default:e.withCtx(()=>[e.createVNode(Se,null,{default:e.withCtx(()=>[e.createVNode(ge,{class:"pa-2"},{default:e.withCtx(()=>[e.createVNode(f,{"no-gutters":""},{default:e.withCtx(()=>[e.createVNode(p,{cols:"auto"},{default:e.withCtx(()=>[e.createVNode(h,{class:"ma-1 rounded",color:i.feedbackColor,"prepend-icon":"mdi-hydro-power",density:"compact",size:"x-large",variant:"outlined"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(s.props.switchLabel),1)]),_:1},8,["color"])]),_:1}),e.createVNode(u),e.createVNode(p,{cols:"auto"},{default:e.withCtx(()=>[e.createVNode(h,{class:"ma-1 rounded",color:i.autoColor,"prepend-icon":"mdi-import",density:"compact",variant:"outlined",size:"x-large"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(s.props.autoLabel),1)]),_:1},8,["color"])]),_:1})]),_:1})]),_:1}),e.createVNode(Ee,null,{default:e.withCtx(()=>[e.createVNode(f,null,{default:e.withCtx(()=>[e.createVNode(p,{cols:"auto"},{default:e.withCtx(()=>[e.createVNode(Ce,{modelValue:a.status.mainSwitch,"onUpdate:modelValue":[o[0]||(o[0]=l=>a.status.mainSwitch=l),o[1]||(o[1]=l=>i.updateMainswitch())],class:"pa-1",mandatory:"",variant:"outlined",divided:"",rounded:"l",color:"blue"},{default:e.withCtx(()=>[e.createVNode(d,null,{default:e.withCtx(()=>[e.createVNode(m,{size:"x-large",color:a.colorScheme.off},{default:e.withCtx(()=>[e.createTextVNode("mdi-fan-off")]),_:1},8,["color"])]),_:1}),e.createVNode(d,null,{default:e.withCtx(()=>[e.createVNode(m,{size:"x-large",color:a.colorScheme.on},{default:e.withCtx(()=>[e.createTextVNode("mdi-fan")]),_:1},8,["color"])]),_:1}),e.createVNode(d,null,{default:e.withCtx(()=>[e.createVNode(m,{size:"x-large",color:a.colorScheme.auto},{default:e.withCtx(()=>[e.createTextVNode("mdi-fan-auto")]),_:1},8,["color"])]),_:1}),e.createVNode(d,{color:a.colorScheme.man},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(i.showInterval),1)]),_:1},8,["color"])]),_:1},8,["modelValue"])]),_:1}),e.createVNode(u),e.createVNode(p,null,{default:e.withCtx(()=>[e.createVNode(be,{max:"27","show-ticks":"",step:"1","tick-size":"1",modelValue:a.status.interval,"onUpdate:modelValue":[o[2]||(o[2]=l=>a.status.interval=l),o[3]||(o[3]=l=>i.updateInterval())],"prepend-icon":"mdi-clock-time-four","min-width":"20em","max-width":"40em",density:"compact","thumb-size":"10",readonly:i.readOnlySlider,class:"pa-2"},null,8,["modelValue","readonly"]),e.createTextVNode(e.toDisplayString(t.timerSek),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e.createElementVNode("h1",null,"Example Integrated Widget: "+e.toDisplayString(s.id),1),P,F,Y,e.createVNode(d,{onClick:o[4]||(o[4]=l=>i.alert("Hello World"))},{default:e.withCtx(()=>[e.createTextVNode('Alert "Hello World"')]),_:1}),Z,J,X,G,e.createElementVNode("pre",null,e.toDisplayString(s.id),1),K,Q,e.createElementVNode("pre",null,e.toDisplayString(s.props),1),v,ee,e.createElementVNode("pre",null,e.toDisplayString(a.status),1),te,oe,e.createElementVNode("pre",null,e.toDisplayString(s.state),1),ne,se,ae,le,e.createVNode(d,{onClick:o[5]||(o[5]=l=>i.send({payload:"Hello World"}))},{default:e.withCtx(()=>[e.createTextVNode("Send msg")]),_:1}),ie,re,e.createVNode(d,{onClick:o[6]||(o[6]=l=>i.test())},{default:e.withCtx(()=>[e.createTextVNode("Send 'my-custom-event'")]),_:1}),ce,de,he,pe,e.createElementVNode("pre",null,e.toDisplayString(t.messages&&t.messages[s.id]?t.messages[s.id]:"No Data"),1),me,ue,fe,e.createElementVNode("p",null,[e.createTextVNode(" Vuetify also comes with a handful of utility classes to assist with styling: "),e.createElementVNode("ul",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.vuetifyStyles,l=>(e.openBlock(),e.createElementBlock("li",{key:l.label},[e.createElementVNode("a",{href:l.url,target:"_blank"},e.toDisplayString(l.label),9,Ve)]))),128))])]),_e,Ne,we,e.createElementVNode("p",null,[e.createVNode(Te,{modelValue:a.input.title,"onUpdate:modelValue":o[7]||(o[7]=l=>a.input.title=l),type:"text"},null,8,["modelValue"]),e.createTextVNode(" VueJS Computed Variable Output: "),e.createElementVNode("i",null,e.toDisplayString(i.titleCase),1)])])}const ye=A(B,[["render",xe],["__scopeId","data-v-7688e34a"]]);c.UIMainswitch=ye,Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})});
