(function(){"use strict";try{if(typeof document<"u"){var d=document.createElement("style");d.appendChild(document.createTextNode(".ui-mainswitch-wrapper[data-v-751d3d1c]{padding:0;margin:0}.ui-mainswitch-class[data-v-751d3d1c]{color:green;font-weight:700}h1[data-v-751d3d1c]{margin-bottom:10px}h2[data-v-751d3d1c]{margin-top:1.5rem;margin-bottom:.75rem}h3[data-v-751d3d1c]{margin-top:1rem}p[data-v-751d3d1c]{margin-bottom:5px}ul li[data-v-751d3d1c]{list-style-type:circle;list-style-position:inside;margin-left:15px}pre[data-v-751d3d1c]{padding:12px;margin:12px;background-color:#eee}code[data-v-751d3d1c]{font-size:.825rem;color:#ae0000}.v-expansion-panel-text[data-v-751d3d1c]{background-color:#f0f0f0}")),document.head.appendChild(d)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}})();
(function(s,t){typeof exports=="object"&&typeof module<"u"?t(exports,require("vue"),require("vuex")):typeof define=="function"&&define.amd?define(["exports","vue","vuex"],t):(s=typeof globalThis<"u"?globalThis:s||self,t(s["ui-mainswitch"]={},s.Vue,s.vuex))})(this,function(s,t,u){"use strict";const y=(e,i)=>{const d=e.__vccOpts||e;for(const[x,n]of i)d[x]=n;return d},N={name:"UIMainswitch",inject:["$socket"],props:{id:{type:String,required:!0},props:{type:Object,default:()=>({})},state:{type:Object,default:()=>({enabled:!1,visible:!1})}},setup(e){console.info("UIMainswitch setup with:",e),console.debug("Vue function loaded correctly",t.markRaw)},data(){return{vuetifyStyles:[{label:"Responsive Displays",url:"https://vuetifyjs.com/en/styles/display/#display"},{label:"Flex",url:"https://vuetifyjs.com/en/styles/flex/"},{label:"Spacing",url:"https://vuetifyjs.com/en/styles/spacing/#how-it-works"},{label:"Text & Typography",url:"https://vuetifyjs.com/en/styles/text-and-typography/#typography"}],startTimeErrorMessage:"",durationErrorMessage:"",dialog:!1,dialogDelete:!1,events:[],editedIndex:-1,editedItem:{startTime:"",duration:"",active:!0,day:[!0,!0,!0,!0,!0,!0,!0]},defaultItem:{startTime:"",duration:"",active:!0,day:[!0,!0,!0,!0,!0,!0,!0]},avatarChars:["O","I","A",""],condition:{mainSwitch:0,interval:14,events:[],feedback:null,auto:null}}},computed:{tableHeaders(){const e=[{title:this.props.language.start,value:"startTime",key:"startTime"},{title:this.props.language.duration,value:"duration"}];return this.props.language.dayOrder.forEach(i=>{e.push({title:this.props.language.dayLabels[i],value:"day."+i})}),e.push({title:this.props.language.activeLabel,value:"active"},{title:this.props.language.actions,value:"actions",sortable:!1}),e},maxInterval(){return this.props.tickInterval.length-1},formTitle(){return this.editedIndex===-1?this.props.language.newEvent:this.props.language.editEvent},showInterval(){return this.props.tickInterval[this.condition.interval].text},readOnlySlider(){return this.condition.mainSwitch==3},mainSwitchColor_2(){return this.props.colors.mainSwitchAuto[this.condition.mainSwitch==2][this.condition.auto]},showCountdown(){return this.condition.countdownSec>=0},...u.mapState("data",["messages"])},watch:{dialog(e){e||this.close()},dialogDelete(e){e||this.closeDelete()}},mounted(){this.$socket.on("widget-load:"+this.id,e=>{this.$store.commit("data/bind",{widgetId:this.id,msg:e})}),this.$socket.on("updateCondition:"+this.id,e=>{this.condition=e.payload}),this.$socket.emit("widget-load",this.id),this.$socket.emit("update-condition"+this.condition.nodeId,this.id)},unmounted(){var e,i;(e=this.$socket)==null||e.off("widget-load:"+this.id),(i=this.$socket)==null||i.off("updateCondition:"+this.id)},methods:{send(e){this.$socket.emit("widget-action",this.id,e)},mainSwitchColor(e){return this.props.colors.mainSwitch[e]},mainSwitchColorX(e){return this.condition.mainSwitch==e?this.props.colors.mainSwitch[4]:this.props.colors.mainSwitch[e]},avatarColor(){return this.props.colors.mainSwitch[this.condition.mainSwitch]},avatarCharacter(){return this.avatarChars[this.condition.mainSwitch]},elevated(e){return e==this.condition.lastSetter},secondsToTime(e){let i=0;return this.condition[e]>0&&(i=this.condition[e]),`${String(Math.floor(i/3600)).padStart(2,"0")}:${String(Math.floor(i%3600/60)).padStart(2,"0")}:${String(i%60).padStart(2,"0")}`},colorPicker(e){return e in this.condition?this.props.colors[e][this.condition[e]]:this.props.colors[e]},updateMainswitch(){console.info("downMainswitch: payload: "+this.condition.mainSwitch),this.$socket.emit("downMainswitch"+this.id,this.id,{payload:this.condition.mainSwitch})},updateInterval(){console.info("downInterval: "+{payload:this.condition.intervall,secs:this.props.tickInterval[this.condition.interval].secs}),this.$socket.emit("downInterval"+this.id,this.id,{payload:this.condition.interval,secs:this.props.tickInterval[this.condition.interval].secs})},updateEvents(){console.info("downEvents: "+this.condition.events),this.$socket.emit("downEvents"+this.id,this.id,{payload:this.condition.events})},editItem(e){this.editedIndex=this.condition.events.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},deleteItem(e){this.editedIndex=this.condition.events.indexOf(e),this.editedItem=Object.assign({},e),this.dialogDelete=!0},deleteItemConfirm(){this.condition.events.splice(this.editedIndex,1),this.updateEvents(),this.closeDelete()},close(){this.dialog=!1,this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},closeDelete(){this.dialogDelete=!1,this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},save(){this.editedItem.startTime?this.editedItem.duration?(this.startTimeErrorMessage="",this.durationErrorMessage="",this.editedIndex>-1?Object.assign(this.condition.events[this.editedIndex],this.editedItem):this.condition.events.push(this.editedItem),this.updateEvents(),this.close()):(this.durationErrorMessage="Sie müssen eine Zeit eingeben.",this.startTimeErrorMessage=""):(this.startTimeErrorMessage="Sie müssen eine Zeit eingeben.",this.durationErrorMessage="")}}},k={className:"ui-mainswitch-wrapper"},S={class:"text-h5"};function b(e,i,d,x,n,o){const c=t.resolveComponent("v-chip"),l=t.resolveComponent("v-col"),m=t.resolveComponent("v-spacer"),_=t.resolveComponent("v-row"),T=t.resolveComponent("v-expansion-panel-title"),h=t.resolveComponent("v-icon"),r=t.resolveComponent("v-btn"),D=t.resolveComponent("v-btn-toggle"),E=t.resolveComponent("v-slider"),M=t.resolveComponent("v-toolbar-title"),j=t.resolveComponent("v-divider"),f=t.resolveComponent("v-card-title"),g=t.resolveComponent("v-text-field"),O=t.resolveComponent("v-switch"),U=t.resolveComponent("v-checkbox"),B=t.resolveComponent("v-container"),P=t.resolveComponent("v-card-text"),w=t.resolveComponent("v-card-actions"),C=t.resolveComponent("v-card"),V=t.resolveComponent("v-dialog"),z=t.resolveComponent("v-toolbar"),L=t.resolveComponent("v-checkbox-btn"),A=t.resolveComponent("v-data-table"),q=t.resolveComponent("v-expansion-panel-text"),R=t.resolveComponent("v-expansion-panel"),X=t.resolveComponent("v-expansion-panels");return t.openBlock(),t.createElementBlock("div",k,[t.createVNode(X,null,{default:t.withCtx(()=>[t.createVNode(R,null,{default:t.withCtx(()=>[t.createVNode(T,{class:"pa-2",color:o.colorPicker("expansionPanelTitle")},{default:t.withCtx(()=>[t.createVNode(_,{"no-gutters":"",align:"center"},{default:t.withCtx(()=>[t.createVNode(l,{cols:"auto",justify:"start"},{default:t.withCtx(()=>[t.createVNode(c,{class:"ma-1 rounded",color:o.colorPicker("feedback"),"prepend-icon":d.props.feedbackIcon,density:"compact",elevation:"2",size:"large",variant:"flat"},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(d.props.switchLabel),1)]),_:1},8,["color","prepend-icon"])]),_:1}),o.showCountdown?(t.openBlock(),t.createBlock(l,{key:0,cols:"auto",justify:"start"},{default:t.withCtx(()=>[t.createVNode(c,{class:"ma-1 rounded",color:o.colorPicker("countdown"),density:"compact",variant:"flat",elevation:"2",size:"default","prepend-icon":"mdi-timer-sand"},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(o.secondsToTime("countdownSec"))+" "+t.toDisplayString(this.props.language.until)+" "+t.toDisplayString(n.condition.switchToText),1)]),_:1},8,["color"])]),_:1})):(t.openBlock(),t.createBlock(l,{key:1,cols:"auto",justify:"start"},{default:t.withCtx(()=>[t.createVNode(c,{class:"ma-1 rounded",color:o.avatarColor(),density:"compact",variant:"flat",elevation:"2",size:"default"},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(o.avatarCharacter()),1)]),_:1},8,["color"])]),_:1})),t.createVNode(m),t.createVNode(l,{cols:"auto",justify:"end"},{default:t.withCtx(()=>[d.props.topicAuto?(t.openBlock(),t.createBlock(c,{key:0,class:"ma-1 rounded",color:o.colorPicker("autoIn"),"prepend-icon":"mdi-import",density:"compact",elevation:o.elevated("autoIn")?7:2,variant:"flat",size:"default"},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(d.props.autoLabel),1)]),_:1},8,["color","elevation"])):t.createCommentVNode("",!0),n.condition.timerRunning?(t.openBlock(),t.createBlock(c,{key:1,class:"ma-1 rounded",color:o.colorPicker("timerIn"),"prepend-icon":"mdi-timer-outline",density:"compact",elevation:o.elevated("timer")?7:2,variant:"elevated",size:"default"},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(o.secondsToTime("timerNextEventSec")),1)]),_:1},8,["color","elevation"])):t.createCommentVNode("",!0)]),_:1})]),_:1})]),_:1},8,["color"]),t.createVNode(q,null,{default:t.withCtx(()=>[t.createVNode(_,{align:"center"},{default:t.withCtx(()=>[t.createVNode(l,{cols:"auto"},{default:t.withCtx(()=>[t.createVNode(D,{modelValue:n.condition.mainSwitch,"onUpdate:modelValue":[i[0]||(i[0]=a=>n.condition.mainSwitch=a),i[1]||(i[1]=a=>o.updateMainswitch())],class:"",mandatory:"",variant:"flat",divided:"",rounded:"l",size:"small"},{default:t.withCtx(()=>[t.createVNode(r,{color:o.mainSwitchColor(0)},{default:t.withCtx(()=>[t.createVNode(h,{color:o.mainSwitchColorX(0)},{default:t.withCtx(()=>[t.createTextVNode("mdi-fan-off")]),_:1},8,["color"])]),_:1},8,["color"]),t.createVNode(r,{color:o.mainSwitchColor(1)},{default:t.withCtx(()=>[t.createVNode(h,{color:o.mainSwitchColorX(1)},{default:t.withCtx(()=>[t.createTextVNode("mdi-fan")]),_:1},8,["color"])]),_:1},8,["color"]),t.createVNode(r,{color:o.mainSwitchColor(2)},{default:t.withCtx(()=>[t.createVNode(h,{color:o.mainSwitchColor_2},{default:t.withCtx(()=>[t.createTextVNode("mdi-fan-auto")]),_:1},8,["color"])]),_:1},8,["color"]),t.createVNode(r,{color:o.mainSwitchColor(3)},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(o.showInterval),1)]),_:1},8,["color"])]),_:1},8,["modelValue"])]),_:1}),t.createVNode(m),t.createVNode(l,null,{default:t.withCtx(()=>[t.createVNode(E,{max:o.maxInterval,"show-ticks":"",step:"1","tick-size":"1",modelValue:n.condition.interval,"onUpdate:modelValue":[i[2]||(i[2]=a=>n.condition.interval=a),i[3]||(i[3]=a=>o.updateInterval())],"prepend-icon":"mdi-timer-sand","min-width":"20em","max-width":"40em",density:"compact","thumb-size":"10",readonly:o.readOnlySlider,color:o.colorPicker("slider"),size:"small","hide-details":""},null,8,["max","modelValue","readonly","color"]),t.createTextVNode(t.toDisplayString(e.timerSek),1)]),_:1})]),_:1}),t.createVNode(_,null,{default:t.withCtx(()=>[t.createVNode(A,{headers:o.tableHeaders,items:n.condition.events,"sort-by":[{key:"startTime",order:"asc"}],density:"compact","hide-default-footer":!0,md:"4"},t.createSlots({top:t.withCtx(()=>[t.createVNode(z,{elevated:"",density:"compact",color:o.colorPicker("eventToolbar")},{default:t.withCtx(()=>[t.createVNode(M,null,{default:t.withCtx(()=>[t.createVNode(h,{size:"x-small"},{default:t.withCtx(()=>[t.createTextVNode("mdi-timer-outline")]),_:1}),t.createTextVNode(" "+t.toDisplayString(this.props.language.events),1)]),_:1}),t.createVNode(j,{class:"mx-4",inset:"",vertical:""}),t.createVNode(m),t.createVNode(V,{"max-width":"500px",modelValue:n.dialog,"onUpdate:modelValue":i[7]||(i[7]=a=>n.dialog=a)},{activator:t.withCtx(({props:a})=>[t.createVNode(r,t.mergeProps({class:"mb-2",color:o.colorPicker("plus")},a,{icon:"mdi-plus"}),null,16,["color"])]),default:t.withCtx(()=>[t.createVNode(C,{variant:"flat"},{default:t.withCtx(()=>[t.createVNode(f,null,{default:t.withCtx(()=>[t.createElementVNode("span",S,t.toDisplayString(o.formTitle),1)]),_:1}),t.createVNode(P,null,{default:t.withCtx(()=>[t.createVNode(B,null,{default:t.withCtx(()=>[t.createVNode(_,null,{default:t.withCtx(()=>[t.createVNode(l,{cols:"4",ma:"2",pa:"2",sm:"6"},{default:t.withCtx(()=>[t.createVNode(g,{type:"time",label:this.props.language.start,modelValue:n.editedItem.startTime,"onUpdate:modelValue":i[4]||(i[4]=a=>n.editedItem.startTime=a),messages:n.startTimeErrorMessage},null,8,["label","modelValue","messages"])]),_:1}),t.createVNode(l,{cols:"2",ma:"2",pa:"2",sm:"6"},{default:t.withCtx(()=>[t.createVNode(g,{type:"time",label:this.props.language.duration,modelValue:n.editedItem.duration,"onUpdate:modelValue":i[5]||(i[5]=a=>n.editedItem.duration=a),messages:n.durationErrorMessage},null,8,["label","modelValue","messages"])]),_:1}),t.createVNode(l,{cols:"2",md:"4",sm:"6"},{default:t.withCtx(()=>[t.createVNode(O,{label:this.props.language.activeLabel,color:"green",modelValue:n.editedItem.active,"onUpdate:modelValue":i[6]||(i[6]=a=>n.editedItem.active=a)},null,8,["label","modelValue"])]),_:1})]),_:1}),t.createVNode(_,null,{default:t.withCtx(()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(this.props.language.dayOrder,a=>(t.openBlock(),t.createBlock(U,{modelValue:n.editedItem.day[a],"onUpdate:modelValue":p=>n.editedItem.day[a]=p,label:this.props.language.dayLabels[a],"hide-details":""},null,8,["modelValue","onUpdate:modelValue","label"]))),256))]),_:1})]),_:1})]),_:1}),t.createVNode(w,null,{default:t.withCtx(()=>[t.createVNode(m),t.createVNode(r,{color:"blue-darken-1",variant:"text",onClick:o.close},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(this.props.language.cancel),1)]),_:1},8,["onClick"]),t.createVNode(r,{color:"blue-darken-1",variant:"text",onClick:o.save},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(this.props.language.ok),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t.createVNode(V,{"max-width":"500px",modelValue:n.dialogDelete,"onUpdate:modelValue":i[8]||(i[8]=a=>n.dialogDelete=a)},{default:t.withCtx(()=>[t.createVNode(C,null,{default:t.withCtx(()=>[t.createVNode(f,{class:"text-h5"},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(this.props.language.deleteConfirm),1)]),_:1}),t.createVNode(w,null,{default:t.withCtx(()=>[t.createVNode(m),t.createVNode(r,{color:"blue-darken-1",variant:"text",onClick:o.closeDelete},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(this.props.language.cancel),1)]),_:1},8,["onClick"]),t.createVNode(r,{color:"blue-darken-1",onClick:o.deleteItemConfirm,variant:"text"},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(this.props.language.ok),1)]),_:1},8,["onClick"]),t.createVNode(m)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["color"])]),"item.active":t.withCtx(({item:a})=>[t.createVNode(c,{color:a.active?o.colorPicker("activeActive"):o.colorPicker("activeInactive"),text:a.active?this.props.language.active:this.props.language.inactive,class:"text-uppercase",size:"small",label:""},null,8,["color","text"])]),"item.actions":t.withCtx(({item:a})=>[t.createVNode(h,{class:"me-2",size:"small",onClick:p=>o.editItem(a)},{default:t.withCtx(()=>[t.createTextVNode(" mdi-pencil-outline ")]),_:2},1032,["onClick"]),t.createVNode(h,{size:"small",onClick:p=>o.deleteItem(a)},{default:t.withCtx(()=>[t.createTextVNode(" mdi-delete-outline ")]),_:2},1032,["onClick"])]),"no-data":t.withCtx(()=>[t.createTextVNode(t.toDisplayString(this.props.language.noData),1)]),_:2},[t.renderList(this.props.language.dayOrder,a=>({name:`item.day.${a}`,fn:t.withCtx(({item:p})=>[t.createVNode(L,{modelValue:p.day[a],"onUpdate:modelValue":F=>p.day[a]=F,density:"compact",readonly:""},null,8,["modelValue","onUpdate:modelValue"])])}))]),1032,["headers","items"])]),_:1})]),_:1})]),_:1})]),_:1})])}const I=y(N,[["render",b],["__scopeId","data-v-751d3d1c"]]);s.UIMainswitch=I,Object.defineProperty(s,Symbol.toStringTag,{value:"Module"})});
